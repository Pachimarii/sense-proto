/*!
 * scroll-watcher - v1.3.1
 * A lightweight, blazing fast, rAF based, scroll watcher.
 * https://github.com/jonataswalker/scroll-watcher
 * Built: Thu Jun 27 2019 07:17:01 GMT-0300 (Brasilia Standard Time)
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).ScrollWatcher=e()}(this,function(){"use strict";function t(){}t.prototype={on:function(t,e,n){var o=this.e||(this.e={});return(o[t]||(o[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var o=this;function i(){o.off(t,i),e.apply(n,arguments)}return i._=e,this.on(t,i,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),o=0,i=n.length;o<i;o++)n[o].fn.apply(n[o].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),o=n[t],i=[];if(o&&e)for(var r=0,s=o.length;r<s;r++)o[r].fn!==e&&o[r].fn._!==e&&i.push(o[r]);return i.length?n[t]=i:delete n[t],this}};var e=t,n=t;function a(t,e){if(void 0===e&&(e="Assertion failed"),!t){if("undefined"!=typeof Error)throw new Error(e);throw e}}function o(t,e,n){void 0===e&&(e=window.document);var o=Array.prototype.slice,i=[];if(/^(#?[\w-]+|\.[\w-.]+)$/.test(t))switch(t[0]){case"#":i=[function(t){return t="#"===t[0]?t.substr(1,t.length):t,document.getElementById(t)}(t.substr(1))];break;case".":i=o.call(e.getElementsByClassName(t.substr(1).replace(/\./g," ")));break;default:i=o.call(e.getElementsByTagName(t))}else i=o.call(e.querySelectorAll(t));return n?i:i[0]}function u(t){var e;switch(function(t){return t===window&&t.document&&t.location?"window":t===document?"htmldocument":"string"==typeof t?"string":c(t)?"element":void 0}(t)){case"window":case"htmldocument":case"element":e=t;break;case"string":e=o("#"===t[0]||"."===t[0]?t:"#"+t);break;default:console.warn("Unknown type")}return e}function c(t){return"HTMLElement"in window?!!t&&t instanceof HTMLElement:!!t&&"object"==typeof t&&1===t.nodeType&&!!t.nodeName}function i(){return[window.pageXOffset||document.documentElement&&document.documentElement.scrollLeft||document.body.scrollLeft,window.pageYOffset||document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop]}function r(){return{w:window.innerWidth||document.documentElement.clientWidth,h:window.innerHeight||document.documentElement.clientHeight}}function f(t){var e=t.getBoundingClientRect(),n=document.documentElement;return{left:e.left+window.pageXOffset-n.clientLeft,top:e.top+window.pageYOffset-n.clientTop,width:t.offsetWidth,height:t.offsetHeight}}e.TinyEmitter=n;var l="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};for(var s,p=(function(s){(function(){var t,e,n,o,i,r;"undefined"!=typeof performance&&null!==performance&&performance.now?s.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(s.exports=function(){return(t()-i)/1e6},e=process.hrtime,o=(t=function(){var t;return 1e9*(t=e())[0]+t[1]})(),r=1e9*process.uptime(),i=o-r):n=Date.now?(s.exports=function(){return Date.now()-n},Date.now()):(s.exports=function(){return(new Date).getTime()-n},(new Date).getTime())}).call(l)}(s={exports:{}},s.exports),s.exports),w="undefined"==typeof window?l:window,d=["moz","webkit"],h="AnimationFrame",m=w["request"+h],y=w["cancel"+h]||w["cancelRequest"+h],g=0;!m&&g<d.length;g++)m=w[d[g]+"Request"+h],y=w[d[g]+"Cancel"+h]||w[d[g]+"CancelRequest"+h];if(!m||!y){var v=0,I=0,b=[];m=function(t){if(0===b.length){var e=p(),n=Math.max(0,1e3/60-(e-v));v=n+e,setTimeout(function(){for(var t=b.slice(0),e=b.length=0;e<t.length;e++)if(!t[e].cancelled)try{t[e].callback(v)}catch(t){setTimeout(function(){throw t},0)}},Math.round(n))}return b.push({handle:++I,callback:t,cancelled:!1}),I},y=function(t){for(var e=0;e<b.length;e++)b[e].handle===t&&(b[e].cancelled=!0)}}function V(t){return m.call(w,t)}V.cancel=function(){y.apply(w,arguments)},V.polyfill=function(t){(t=t||w).requestAnimationFrame=m,t.cancelAnimationFrame=y};function O(t){this.Base=t,this.lastXY=[],this.watching={},this.viewport=r(),this.loopBound=this.loop.bind(this),this.runLoop(),this.setListeners(),this.rafId=null}var F="page:load",E="scrolling",B="enter",L="enter:full",x="exit:partial",A="exit",T={top:0,bottom:0};function X(t){return{isInViewport:t.isInViewport,isFullyInViewport:t.isFullyInViewport,isAboveViewport:t.isAboveViewport,isBelowViewport:t.isBelowViewport,isPartialOut:t.isPartialOut,isFullyOut:t.isFullyOut}}return O.prototype.loop=function(){this.lastXY.join()!==i().join()&&this.handleItems(),this.runLoop()},O.prototype.handleItems=function(){var e=this,n=this.getScrollData();this.Base.emit(E,n),Object.keys(this.watching).forEach(function(t){n.target=e.watching[t].node,e.recalculate(e.watching[t]),e.fireEvents(e.watching[t],n)})},O.prototype.fireEvents=function(t,e){t.isInViewport&&!t.wasInViewport&&(t.wasInViewport=!0,t.wasFullyOut=!1,t.emitter.emit(B,e)),t.isPartialOut&&!t.wasPartialOut&&(t.wasPartialOut=!0,t.wasFullyInViewport=!1,t.emitter.emit(x,e)),t.isFullyOut&&!t.wasFullyOut&&(t.wasFullyOut=!0,t.wasInViewport=!1,t.wasFullyInViewport=!1,t.emitter.emit(A,e)),t.isFullyInViewport&&!t.wasFullyInViewport&&(t.wasFullyInViewport=!0,t.wasPartialOut=!1,t.wasFullyOut=!1,t.emitter.emit(L,e))},O.prototype.getScrollData=function(){var t=i(),e=t[1]>this.lastXY[1];return{scrollX:(this.lastXY=t)[0],scrollY:t[1],scrollingDown:e,scrollingUp:!e}},O.prototype.stopLoop=function(){V.cancel(this.rafId)},O.prototype.runLoop=function(){this.rafId=V(this.loopBound)},O.prototype.recalculate=function(t){var e=t.dimensions.top+t.offset.top,n=t.dimensions.top+t.offset.bottom+t.dimensions.height,o=this.lastXY[1],i=this.lastXY[1]+this.viewport.h;t.isAboveViewport=e<o,t.isBelowViewport=i<n,t.isInViewport=e<=i&&o<n,t.isFullyInViewport=o<=e&&n<=i||t.isAboveViewport&&t.isBelowViewport,t.isFullyOut=!t.isInViewport&&t.wasInViewport,t.isPartialOut=t.wasFullyInViewport&&!t.isFullyInViewport&&!t.isFullyOut},O.prototype.setListeners=function(){var n=this;document.addEventListener("readystatechange",function t(e){if("undefined"!=typeof document)switch(document.readyState){case"loading":case"interactive":break;case"complete":n.Base.emit(F,{scrollX:n.lastXY[0],scrollY:n.lastXY[1]}),document.removeEventListener("readystatechange",t)}},!1),window.addEventListener("resize",function(t){n.viewport=r()},!1)},function(s){function l(){if(!(this instanceof l))return new l;s.call(this),this.counter=0,l.Internal=new O(this)}return s&&(l.__proto__=s),((l.prototype=Object.create(s&&s.prototype)).constructor=l).prototype.watch=function(t,e){var n;a("string"==typeof t||c(t),"@param `element` should be string type or DOM Element!"),a("number"==typeof e||"object"==typeof e||void 0===e,"@param `opt_offset` should be number or Object or undefined!");var o=++this.counter,i=new s,r=u(t);return a(c(r),"Couldn't evaluate ("+t+") to a valid DOM node"),n="number"==typeof e?{top:e,bottom:e}:function(t,e){var n={};for(var o in t)n[o]=t[o];for(var i in e)n[i]=e[i];return n}(T,e),l.Internal.watching[o]={node:r,emitter:i,offset:n,dimensions:f(r)},function(t){t.isInViewport=!1,t.wasInViewport=!1,t.isAboveViewport=!1,t.wasAboveViewport=!1,t.isBelowViewport=!1,t.wasBelowViewport=!1,t.isPartialOut=!1,t.wasPartialOut=!1,t.isFullyOut=!1,t.wasFullyOut=!1,t.isFullyInViewport=!1,t.wasFullyInViewport=!1}(l.Internal.watching[o]),{target:r,props:X(l.Internal.watching[o]),update:function(){var t=l.Internal.watching[o],e=l.Internal.getScrollData();return e.target=t.node,l.Internal.stopLoop(),function(t){t.isInViewport=!1,t.isAboveViewport=!1,t.isBelowViewport=!1,t.isPartialOut=!1,t.isFullyOut=!1,t.isFullyInViewport=!1}(t),t.dimensions=f(r),l.Internal.recalculate(t),this.props=X(t),l.Internal.fireEvents(t,e),l.Internal.runLoop(),this},once:function(t,e){return i.once(t,e,this),this},on:function(t,e){return i.on(t,e,this),this},off:function(t,e){return i.off(t,e,this),this}}},l.prototype.windowAtBottom=function(t){void 0===t&&(t=0);var e=l.Internal.lastXY[1],n=l.Internal.viewport.h;return t=parseInt(t,10),e+n>=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight)-t},l.prototype.windowAtTop=function(t){return void 0===t&&(t=0),l.Internal.lastXY[1]<=(t=parseInt(t,10))},l}(e)});
